!function(){function e(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML}function t(e){return e<10&&e>=0?"&nbsp;&nbsp;"+e:e}function a(e,t){return Object.keys(e).find(function(a){return e[a]===t})}function i(){function i(){var e=[];return jQuery("#categorychecklist input:checked").each(function(){e.push(jQuery(this).attr("value"))}),e}function r(){var e=[];return jQuery("#categorychecklist input:checked").each(function(){var t=jQuery(this).parent().clone().children().remove().end().text();e.push(t.trim())}),e}function o(){var e=[];return jQuery("#tagsdiv-post_tag .tagchecklist > span").each(function(){var t=jQuery(this).clone().children().remove().end().text();e.push(t.trim())}),e}function n(){var e=[];return jQuery("#apple-news-publish div.section input:checked").each(function(){var t=a(C,jQuery(this).attr("id"));"undefined"!=typeof t&&e.push(t)}),e}function s(){var e={},t=prompt("What should we call this option?\n\n",""),a=confirm("Should Related by Primary Tag be added to stories automatically?");e.title=t,e["check-sections"]=i(),e["add-tags"]=o(),e["primary-section"]=document.getElementById(k).value,e["primary-tag"]=document.getElementById(j).value,e["apple-news"]=n(),e.related=a;var s="#"+j+' option[value="'+e["primary-tag"]+'"]';e["help-primary-tag"]=jQuery(s).text(),e["help-sections"]=r();var l="#"+k+' option[value="'+e["primary-section"]+'"]';e["help-primary-section"]=jQuery(l).text();var c=document.createElement("img");c.style.cssText="display:none;",c.src="http://www.denverpostplus.com/app/autoproducer/ap-new.php?"+serialize(e)}function l(e){for(var t=0,a=e.length;t<a;t++)document.getElementById("in-category-"+e[t]).checked=!0}function c(e){for(var t=0,a=e.length;t<a;t++)document.getElementById(C[e[t]]).checked=!0}function d(e,t){"undefined"!=typeof e&&""!=e&&""==document.getElementById(k).value&&(document.getElementById(k).value=e),"undefined"!=typeof t&&""!=t&&""==document.getElementById(j).value&&(document.getElementById(j).value=t)}function p(e){for(var t=0,a=e.length;t<a;t++){document.getElementById("new-tag-post_tag").value=e[t];jQuery("#post_tag .ajaxtag input.button.tagadd").click()}}function u(){jQuery("#coauthors_hidden_input").remove(),jQuery(".suggest.coauthor-row:first-child").append('<input id="coauthors_hidden_input" name="coauthors[]" value="the-associated-press" type="hidden">')}function y(){jQuery("#coauthors_hidden_input").remove(),jQuery(".suggest.coauthor-row:first-child").append('<input id="coauthors_hidden_input" name="coauthors[]" value="the-washington-post" type="hidden">')}function h(e,t,a,i){"undefined"!=typeof i&&1==i&&y(),"undefined"!=typeof a&&1==a&&u(),("undefined"!=typeof e.related&&1==e.related||1==t)&&m(),"Weather Story"==typeof e.title&&g(),"undefined"!=typeof e["check-sections"]&&l(e["check-sections"]),"undefined"!=typeof e["add-tags"]&&p(e["add-tags"]),"undefined"==typeof e["primary-section"]&&"undefined"==typeof e["primary-tag"]||d(e["primary-section"],e["primary-tag"]),"undefined"!=typeof e["apple-news"]&&c(e["apple-news"])}function m(){var e=new Date,t=e.getSeconds()+60*e.getMinutes(),a=document.createElement("script");a.setAttribute("src","https://extras.denverpost.com/app/bookmarklet/js/related-tag.min.js?v="+t),document.body.appendChild(a)}function g(){var e=new Date,t=e.getSeconds()+60*e.getMinutes(),a=document.createElement("script");a.setAttribute("src","https://extras.denverpost.com/app/bookmarklet/js/weather.js?v="+t),document.body.appendChild(a)}function f(){jQuery(".ui-dialog-titlebar-close").hide(),jQuery(".ui-dialog").css("z-index","99999999"),jQuery("#auto-producer").keydown(function(e){if(13==e.keyCode)return jQuery("#btnOne").trigger("click"),!1}),jQuery(".tooltip-link").on("mouseenter",function(){var e=jQuery(this).data("tooltip");jQuery(".tipGraf").html(e).css("display","block")}).on("mouseleave",function(){jQuery(".tipGraf").html("").css("display","none")}),jQuery("#APoptionSelect").get(0).focus()}function w(a){var i="<p>Welcome to The Denver Post AUTO-PRODUCERâ„¢. Here's a list of helper functions I can perform for you:</p>";i+='<div style="width:33%;float:left;display:inline-block;">',i+="<ul>";var r=0,o=!0;for(var n in a){var s=a[n].related?' <span style="color:darkred;font-weight:bold;">*</span>':" ",l="<p>Sets <strong>Primary Section</strong> to:<br />"+a[n]["help-primary-section"]+"</p>";l+="<p>Sets <strong>Primary Tag</strong> to:<br />"+a[n]["help-primary-tag"]+"</p>",l+="<p>Selects these <strong>Sections</strong>:<br />"+a[n]["help-sections"]+"</p>",l+="<p>Adds these <strong>Tags</strong>:<br />"+a[n]["add-tags"].join(", ")+"</p>",l+="<p>Adds <strong>Apple News</strong> sections:<br />"+a[n]["apple-news"]+"</p>",a.hasOwnProperty(n)&&(i+="<li>( "+t(n)+" ) "+a[n].title+s+' <a class="tooltip-link" data-tooltip="'+e(l)+'" href="#" tabindex="0">(?)</a></li>'),r>x/2&&r>10&&1==o&&(i+='</ul></div><div style="width:33%;float:left;display:inline-block;"><ul>',o=!1),r++}return i+="</ul>",i+="</div>",i+='<div style="width:33%;float:left;display:inline-block;">',i+='<div class="tipGraf" style="display:none;"></div>',i+="</div>",i+='<div style="width:100%;height:0;display:block;clear:both;"></div>',i+='<div style="width:50%;float:left;display:inline-block;">',i+='<p>Enter selection: <input type="text" id="APoptionSelect" tabindex="1"></p>',i+="</div>",i+='<div style="width:50%;float:left;display:inline-block;">',i+='<p>Insert Related by Primary Tag?<span style="color:darkred;font-weight:bold;">*</span> <input type="checkbox" id="relatedSelect" tabindex="2" /><br />',i+='Change author to AP?<span style="color:darkblue;font-weight:bold;">*</span> <input type="checkbox" id="APauthorSelect" tabindex="3" /><br />',i+='Change author to WaPo?<span style="color:darkblue;font-weight:bold;">*</span> <input type="checkbox" id="WaPoauthorSelect" tabindex="4" /></p>',i+="</div>",i+='<div style="width:100%;height:0;display:block;clear:both;"></div>',i+='<p style="font-size:85%;color:darkred;">Items with a star insert Related by Primary Tag automatically.<br />Related items will only be inserted on articles with 6 or more paragraphs.</p>',i+='<p style="font-size:85%;color:darkblue;">AP will override WaPo if both are checked; you WILL NOT see the new author until you save.</p>'}function b(){var e=jQuery("#APoptionSelect").val(),t=jQuery("#relatedSelect").prop("checked"),a=jQuery("#APauthorSelect").prop("checked"),i=jQuery("#WaPoauthorSelect").prop("checked");if(N.indexOf(e)!=-1)jQuery("#auto-producer").html(v),h(Q[e],t,a,i),setTimeout(function(){jQuery("#auto-producer").dialog("close")},1250);else{var r=confirm("That's not a valid option. Try again, or Cancel to quit.");if(0!=r)return!1;jQuery("#auto-producer").dialog("close")}}var v='<h3 style="text-align:center;"><strong style="color:#067a51;">I can do that!</strong></h3><p style="text-align:center;"><img src="https://extras.denverpost.com/oil-gas-deaths/img/loading.gif" style="margin:1em auto;width:15%;" /></p>',k="fm-mason_post_settings-0-schema-0-primary_section-0",j="fm-mason_post_settings-0-schema-0-primary_tag-0",C={broncos:"apple-news-section-a39ee59b-d872-39ad-a323-b46261ea34ad","colorado-news":"apple-news-section-f7f303a0-da3b-3a93-8c2c-93be489a30a6",sports:"apple-news-section-3f7e6dbd-9845-39a3-ab67-14118fbd4a0e",politics:"apple-news-section-befc81a6-ec36-3426-9992-0ce17c5782f4",business:"apple-news-section-9c5c2844-09ca-3e86-8315-87224d14c790",entertainment:"apple-news-section-e401a8c2-26e7-3871-8ede-782e7e582af4",lifestyle:"apple-news-section-c81ed803-584d-3a4a-b125-09beb6cf0f8b",cannabist:"apple-news-section-aa2f2d08-860e-32b4-a1d3-765ea19a85d7",opinion:"apple-news-section-4c9d0650-2499-3637-b87f-f9355a2a3471"},Q={0:{title:"Do Nothing","add-tags":[],"help-sections":"Does not add sections or tags!",related:!1},1:{title:"Trump Story","check-sections":["48","11580","75","81","39","59"],"add-tags":["Donald Trump"],"primary-section":"11580","primary-tag":"1276","apple-news":["politics"],related:!0,"help-primary-tag":"Donald Trump","help-sections":"Latest News, News, Nation and World News, Politics, National Politics, Trump Administration","help-primary-section":"Trump Administration"},10:{title:"Nation / World Story","check-sections":["48","39","59"],"add-tags":[],"primary-section":"59","primary-tag":"","apple-news":[],related:!1,"help-primary-tag":"","help-sections":"Latest News, News, Nation and World News","help-primary-section":"Nation and World News"},20:{title:"Colorado News","check-sections":["48","39","47"],"add-tags":[],"primary-section":"47","primary-tag":"","apple-news":["colorado-news"],related:!0,"help-primary-tag":"","help-sections":"Latest News, News, Colorado News,","help-primary-section":"Colorado News"},21:{title:"Colorado Wildfires","check-sections":["48","39","47","65"],"add-tags":["wildfires","Colorado wildfires 2017"],"primary-section":"65","primary-tag":"11673","apple-news":["colorado-news"],related:!0,"help-primary-tag":"Colorado wildfires 2017","help-sections":"Latest News, News, Colorado News, Colorado Wildfires","help-primary-section":"Colorado Wildfires"},22:{title:"Crime Story","check-sections":["48","40","47","39"],"add-tags":[],"primary-section":"40","primary-tag":"","apple-news":["colorado-news"],related:!1,"help-primary-tag":"","help-sections":"Latest News, News, Colorado News, Crime &amp; Courts","help-primary-section":"Crime &amp; Courts"},23:{title:"Weather Story","check-sections":["48","64","47","39"],"add-tags":[],"primary-section":"64","primary-tag":"","apple-news":["colorado-news"],related:!0,"help-primary-tag":"","help-sections":"Latest News, News, Colorado News, Weather","help-primary-section":"Weather"},31:{title:"Colorado Legislature","check-sections":["48","39","47","79","80","75"],"add-tags":[],"primary-section":"79","primary-tag":"","apple-news":["politics"],related:!1,"help-primary-tag":"","help-sections":"Latest News, News, Colorado News, Politics, Local Politics, Colorado Legislature","help-primary-section":"Colorado Legislature"},40:{title:"Business Story","check-sections":["48","15"],"add-tags":["More Business News"],"primary-section":"15","primary-tag":"7864","apple-news":["business"],related:!1,"help-primary-tag":"More Business News","help-sections":"Latest News, Business","help-primary-section":"Business"},41:{title:"Technology Story","check-sections":["48","15","27"],"add-tags":["More Business News"],"primary-section":"27","primary-tag":"7864","apple-news":["business"],related:!1,"help-primary-tag":"More Business News","help-sections":"Latest News, Business, Technology","help-primary-section":"Technology"},51:{title:"Ask Amy","check-sections":["48","85","83","84","6710","9101"],"add-tags":["advice","Ask Amy","relationship advice"],"primary-section":"85","primary-tag":"7819","apple-news":["lifestyle"],related:!0,"help-primary-tag":"Ask Amy, advice, relationship advice","help-sections":"Latest News, Ask Amy, Lifestyle, Entertainment / Lifestyle, Family, Lifestyle Columnists","help-primary-section":"Ask Amy"},52:{title:"Movie Review","check-sections":["48","33","30","9101"],"add-tags":["movie reviews"],"primary-section":"33","primary-tag":"4289","apple-news":["entertainment"],related:!1,"help-primary-tag":"movie reviews","help-sections":"Latest News, Movies, Entertainment, Entertainment / Lifestyle","help-primary-section":"Movies"},53:{title:"Restaurants &amp; Dining","check-sections":["48","83","90","9101"],"add-tags":[],"primary-section":"90","primary-tag":"","apple-news":["entertainment"],related:!0,"help-primary-tag":"","help-sections":"Latest News, Lifestyle, Restaurants &amp; Dining, Entertainment / Lifestyle","help-primary-section":"Restaurants &amp; Dining"},54:{title:"Travel Story","check-sections":["48","93"],"add-tags":[],"primary-section":"93","primary-tag":"","apple-news":["entertainment","lifestyle"],related:!1,"help-primary-tag":"","help-sections":"Latest News, Travel","help-primary-section":"Travel"},61:{title:"YourHub Crime Blotter","check-sections":["48","2222","40"],"add-tags":["crime blotter"],"primary-section":"2222","primary-tag":"4241","apple-news":["colorado-news"],related:!0,"help-primary-tag":"crime blotter","help-sections":"Latest News, YourHub, Crime &amp; Courts","help-primary-section":"YourHub"},62:{title:"YourHub Biz Profile","check-sections":["48","2222","15"],"add-tags":["YourHub business profile"],"primary-section":"2222","primary-tag":"4280","apple-news":["colorado-news"],related:!0,"help-primary-tag":"YourHub business profile","help-sections":"Latest News, YourHub, Business","help-primary-section":"YourHub"}},x=Object.keys(Q).length,N=[];for(var A in Q)Q.hasOwnProperty(A)&&N.push(A);jQuery("#auto-producer").html(w(Q)),jQuery("#auto-producer").dialog({autoOpen:!1,buttons:[{id:"btnCapture",text:"Capture New",click:function(){s()},tabindex:10},{id:"btnCancel",text:"Cancel",click:function(){jQuery(this).dialog("close")},tabindex:11},{id:"btnOne",text:"ðŸ¤– AUTO-PRODUCEâ„¢!",click:function(){b()},tabindex:12}],title:"Denver Post ðŸ¤– AUTO-PRODUCERâ„¢ v0.5.2",resize:"auto",modal:!0,minWidth:900,open:function(e,t){f()}}),jQuery("#auto-producer").dialog("open")}function r(){alert("Search function chosen!")}function o(){function e(){jQuery(".ui-dialog-titlebar-close").hide(),jQuery(".ui-widget-header").css("border","1px solid #aaa"),jQuery(".ui-widget-header").css("color","#222"),jQuery(".ui-widget-header").css("background","#ccc url(/wp-content/plugins/fieldmanager/css/jquery-ui/images/ui-bg_highlight-soft_75_cccccc_1x100.png) 50% 50% repeat-x"),jQuery(".ui-dialog").css("z-index","99999999"),jQuery("#auto-producer").keydown(function(e){if(13==e.keyCode)return jQuery("#btnOne").trigger("click"),!1}),jQuery("input[name=searchname]:checked").focus()}function t(e){var t="<p>Welcome to The Denver Post AUTO-SEARCHâ„¢ for CONTENT HUB. Here's what I can do for you:</p>";t+="<p>";for(var a in e)if(e.hasOwnProperty(a)){var i=e[a].default?' tabindex="1"':' tabindex="-1"';t+='<input type="radio" name="searchname" value="'+e[a]["search-term"]+'" '+i+e[a].default+"> "+e[a].title+"<br />"}return t+="</p>",t+='<div style="width:100%;height:0;display:block;clear:both;"></div>',t+='<p>Add a search term? <input type="text" id="APoptionSelect" tabindex="2"></p>'}function a(){var e=jQuery("#APoptionSelect").val(),t=jQuery("input[name=searchname]:checked").val(),a=""!=e?t+" "+e:t;jQuery("#hub_search-search-input").val(a),jQuery("#auto-producer").html(r),jQuery("#search-submit").trigger("click")}var i={1:{title:"Daily Camera","search-term":"daily camera",default:" checked"},2:{title:"Longmont Times-Call","search-term":"times-call",default:!1},3:{title:"Loveland Reporter-Herald","search-term":"reporter-herald",default:!1},4:{title:"The Cannabist","search-term":"cannabist",default:!1},5:{title:"The Know","search-term":"the know",default:!1},6:{title:"San Jose Mercury News","search-term":"mercury news",default:!1},7:{title:"Fort Morgan Times","search-term":"fort morgan times",default:!1}},r='<h3 style="text-align:center;"><strong style="color:#067a51;">Waiting for freakin\' Content Hub...</strong></h3><p style="text-align:center;"><img src="https://extras.denverpost.com/oil-gas-deaths/img/loading.gif" style="margin:1em auto;width:15%;" /></p>';jQuery("#auto-producer").html(t(i)),jQuery("#auto-producer").dialog({autoOpen:!1,buttons:[{id:"btnCancel",text:"Cancel",click:function(){jQuery(this).dialog("close")},tabindex:4},{id:"btnOne",text:"ðŸ¤– AUTO-SEARCH!",click:function(){a()},tabindex:3}],title:"Denver Post ðŸ¤– AUTO-SEARCH v0.5.5",resize:"auto",modal:!0,minWidth:900,open:function(t,a){e()}}),jQuery("#auto-producer").dialog("open")}function n(){alert("Wire Hub function chosen!")}function s(){var e=window.location.href;e.indexOf("post.php")>-1?i():e.indexOf("edit.php")>-1?r():e.indexOf("content_hub_view")>-1?o():e.indexOf("wire_hub_view")>-1&&n()}if(serialize=function(e,t){var a,i=[];for(a in e)if(e.hasOwnProperty(a)){var r=t?t+"["+a+"]":a,o=e[a];i.push(null!==o&&"object"==typeof o?serialize(o,r):encodeURIComponent(r)+"="+encodeURIComponent(o))}return i.join("&")},!document.body.contains(document.getElementById("auto-producer"))){var l=window.document.createElement("script");l.setAttribute("src","https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"),window.document.body.appendChild(l);var c=window.document.createElement("div");c.setAttribute("id","auto-producer"),window.document.body.appendChild(c)}var d=setInterval(function(){"undefined"!=typeof jQuery.ui.dialog&&(clearInterval(d),s())},100)}();