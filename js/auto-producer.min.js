!function(){function e(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML}function t(e){return e<10&&e>=0?"&nbsp;&nbsp;"+e:e}function r(e){return e<10&&e>=0?"0"+e:e}function n(e,t){return Object.keys(e).find(function(r){return e[r]===t})}function a(){var e=new Date,t=e.getSeconds()+60*e.getMinutes();return t}function o(e,t){var r,n=[];for(r in e)if(e.hasOwnProperty(r)){var a=t?t+"["+r+"]":r,i=e[r];n.push(null!==i&&"object"==typeof i?o(i,a):encodeURIComponent(a)+"="+encodeURIComponent(i))}return n.join("&")}function s(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}function c(e){return e.toLowerCase().replace(/[^\w\ ]+/g,"").replace(/ +/g,"-")}function d(r){function d(){var e=[];return jQuery("#categorychecklist input:checked").each(function(){e.push(jQuery(this).attr("value"))}),e}function l(){var e=[];return jQuery("#categorychecklist input:checked").each(function(){var t=jQuery(this).parent().clone().children().remove().end().text();e.push(t.trim())}),e}function u(){var e=[];return jQuery("#tagsdiv-post_tag .tagchecklist > span").each(function(){var t=jQuery(this).clone().children().remove().end().text();e.push(t.trim())}),e}function p(){var e=[];return jQuery("#tagsdiv-feature .tagchecklist > span").each(function(){var t=jQuery(this).clone().children().remove().end().text();t.match(/Outstream/)&&e.push(t.trim())}),e}function h(){var e=[];return jQuery("#apple-news-publish div.section input:checked").each(function(){var t=n(H,jQuery(this).attr("id"));"undefined"!=typeof t&&e.push(t)}),e}function g(){var e={},t=null;e:for(;;){if(t=prompt("What should we call this option?\n\n",""),""!==t&&null!==t)break e;alert("You have to enter name, dude.")}var r=confirm("Should Related by Primary Tag be added to stories automatically?");e.title=t,e["check-sections"]=d(),e["add-tags"]=u(),e["primary-section"]=document.getElementById(I).value,e["primary-tag"]=document.getElementById(L).value,e.features=p(),e["apple-news"]=h(),e.related=r;var n="#"+L+' option[value="'+e["primary-tag"]+'"]';e["help-primary-tag"]=" "==jQuery(n).text()?"":jQuery(n).text(),e["help-sections"]=l();var a="#"+I+' option[value="'+e["primary-section"]+'"]';if(e["help-primary-section"]=" "==jQuery(a).text()?"":jQuery(a).text(),""!==t&&null!==t){if(confirm("You're about to submit a new option called "+t+". Are you sure?")){var i=document.createElement("img");i.style.cssText="display:none;",i.src="http://www.denverpostplus.com/app/autoproducer/ap-new.php?"+o(e)}}else alert("Sorry, something went wrong. Try again. \n\n\nOh, and next time -- don't do whatever you did that broke it this time.")}function f(e){for(var t=0,r=e.length;t<r;t++)document.getElementById("in-category-"+e[t]).checked=!0}function y(e){for(var t=0,r=e.length;t<r;t++)document.getElementById(H[e[t]]).checked=!0}function v(e,t){"undefined"!=typeof e&&""!==e&&""===document.getElementById(I).value&&(document.getElementById(I).value=e),"undefined"!=typeof t&&""!==t&&""===document.getElementById(L).value&&(document.getElementById(L).value=t)}function b(e){for(var t=0,r=e.length;t<r;t++)document.getElementById("new-tag-post_tag").value=e[t],jQuery("#post_tag .ajaxtag input.button.tagadd").click()}function w(e){for(var t=0,r=e.length;t<r;t++)document.getElementById("new-tag-feature").value=e[t],jQuery("#feature .ajaxtag input.button.tagadd").click()}function x(){jQuery("#coauthors_hidden_input").remove(),jQuery(".suggest.coauthor-row:first-child").append('<input id="coauthors_hidden_input" name="coauthors[]" value="the-associated-press" type="hidden">')}function k(){jQuery("#coauthors_hidden_input").remove(),jQuery(".suggest.coauthor-row:first-child").append('<input id="coauthors_hidden_input" name="coauthors[]" value="the-washington-post" type="hidden">')}function _(){document.getElementById("following_usergroups12195").checked=!0}function C(e){tagsHTML="<script>",tagsHTML+="function slugItUp(inText) {",tagsHTML+="return inText.toLowerCase().replace(/[^\\w ]+/g,'').replace(/ +/g,'-');",tagsHTML+="}",tagsHTML+="function addSuggestedTag(newSuggestedTag) {",tagsHTML+="document.getElementById('new-tag-post_tag').value = newSuggestedTag;",tagsHTML+="jQuery('#post_tag .ajaxtag input.button.tagadd').click();",tagsHTML+="var delTag = '#tagSuggest_' + slugItUp(newSuggestedTag);",tagsHTML+="jQuery(delTag).remove();",tagsHTML+="}",tagsHTML+="function closeSuggestedTags() {",tagsHTML+="jQuery('#autoProducerSuggestedTags').remove();",tagsHTML+="}",tagsHTML+="jQuery('body, html').animate({ scrollTop: jQuery('#autoProducerSuggestedTags').offset().top - 70 }, 'fast');",tagsHTML+="</script>",tagsHTML+='<div style="width:88%;padding:.5em 1em;border:1px solid DarkRed;font-size:1em;color:DarkRed;" id="autoProducerSuggestedTags">',tagsHTML+='<p style="color:black;font-size:1.1em;">I have some suggested tags for you -- click to add them!</p>',tagsHTML+='<ul style="list-style-type:none;text-indent:none;font-size:1.2em;">';for(var t=0,r=e.length;t<r;t++){var n=c(e[t]);tagsHTML+='<li id="tagSuggest_'+n+'" onClick="javascript:addSuggestedTag(\''+e[t]+'\')" style="cursor:pointer;margin:0 0 .25em;padding:0;">+ '+e[t]+"</li>"}tagsHTML+="</ul>",tagsHTML+='<p style="color:black;margin-top:1em;font-size:1.1em;text-align:right;cursor:pointer;" onClick="javascript:closeSuggestedTags();"><strong>Close</strong></p>',tagsHTML+="</div>",jQuery("#tagsdiv-post_tag .inside").prepend(tagsHTML)}function j(e,t){var r=[];r.wire=!0,"undefined"!=typeof t.WaPoauthorSelect&&t.WaPoauthorSelect===!0&&k(),"undefined"!=typeof t.APauthorSelect&&t.APauthorSelect===!0&&x(),("undefined"!=typeof e.related&&e.related===!0||t.selectRelated===!0)&&(r.related=!0),"undefined"!=typeof e["check-sections"]&&e["check-sections"].indexOf("94")>-1&&_(),"undefined"!=typeof e.title&&"Weather Story"==e.title&&(r.wx=!0),"undefined"!=typeof e.title&&"Recipes"==e.title&&(r["rel-section"]=!0),"undefined"==typeof e.title||"Crime Story"!=e.title||t.homicideSelect||(r.crime=!0),t.homicideSelect&&(r.homicide=!0),t.informSelect&&(r.inform=!0),t.youtubeSelect&&(r.youtube=!0),t.newsletterSelect&&(r.newsletter=!0),t.promoSelect&&(r.promos=!0),"YourHub Crime Blotter"==e.title&&(r["related-override"]=!0,document.getElementById("fm-mason_post_settings-0-schema-0-featured_image_settings-0").value="hide"),"undefined"!=typeof e["check-sections"]&&f(e["check-sections"]),"undefined"!=typeof e["add-tags"]&&b(e["add-tags"]),"undefined"!=typeof e.features&&w(e.features),"undefined"==typeof e["primary-section"]&&"undefined"==typeof e["primary-tag"]||v(e["primary-section"],e["primary-tag"]),"undefined"!=typeof e["apple-news"]&&y(e["apple-news"]);var n=O(r);C(n)}function O(e){String.prototype.capitalizeFirstLetters=function(){var e=this.replace(/,(?=[^\s])/g,", ").split(/[\s]+/),t=[];for(i=0,len=e.length;i<len;i++)"and"==e[i].toLowerCase()?t.push(e[i].toLowerCase()):t.push(e[i].charAt(0).toUpperCase()+e[i].slice(1).toLowerCase());return t=t.join(" "),t.match(/,\s*$/)&&(t=t.replace(/,\s*$/,"")),t};var t=document.getElementById("excerpt").textContent,r=!1,n=document.getElementById("content"),a=!1,o=autoProducerTagList.length,c=[],d=n.textContent.toLowerCase(),l=document.getElementById("post_tag").getElementsByTagName("button"),u=[];for(i=0;i<l.length;i++)u[i]=l[i].textContent.toLowerCase().replace("remove term: ","");for(;o--&&o>=0;)new RegExp("\\b"+autoProducerTagList[o].toLowerCase()+"\\b").test(d)&&u.indexOf(autoProducerTagList[o].toLowerCase())==-1&&c.push(autoProducerTagList[o]);var p=/\n\n|<\/p><p>|<\/p>\n<p>|[\s]{2,5}<p>|<p>|<\/p> <p>|<\/p> <p \/> <p>/,h=n.textContent.split(p);r=s(h[0].toLowerCase().startsWith("by")||h[0].toLowerCase().startsWith("[caption")||h[0].toLowerCase().startsWith("<strong>by")?h[1].toLowerCase().startsWith("by")||h[1].toLowerCase().startsWith("[caption")||h[0].toLowerCase().startsWith("<strong>by")?h[2].replace(/\[.+\]/g,""):h[1].replace(/\[.+\]/g,""):h[0].replace(/\[.+\]/g,""));var m=[];for(i=0,len=h.length;i<len;i++)null!==h[i].match(/\[related_articles/)&&(a=!0),null===h[i].match(/<p \/>/)&&h[i].length>0&&!(h[i].match(/&nbsp;/)&&h[i].length<7)&&m.push(h[i].replace("</p>","").replace("(AP) —","--").replace("&#8212;"," "));if(e.wire){if(m[0].toLowerCase().startsWith("by")){var g=m[0],f="",y=document.getElementById("coauthors_hidden_input").value;if("by the associated press"==g.toLowerCase())f="APonly";else{var v=g.lastIndexOf(",");f=g.indexOf("(c)")>-1?g.split("(c)")[0].substr(0,v).capitalizeFirstLetters().replace("By ","").trim():"the-associated-press"!=y?g.substr(0,v).capitalizeFirstLetters().replace("By ",""):g.capitalizeFirstLetters().replace("By ","")}"the-associated-press"==y?"APonly"==f?m.shift():m[0]="<strong>By "+f+"</strong>, <em>The Associated Press</em>":"the-washington-post"==y&&(m[0]="<strong>By "+f+"</strong>, <em>The Washington Post</em>")}t.length<10&&(t=r);var b=t.substring(0,t.indexOf("(AP) —")),w=t.replace(b,"").replace("(AP) —","").trim();document.getElementById("excerpt").value=w}if(e.related&&!a){var x=m.length-4<2?2:m.length>24?11:m.length-4;m.length>=6||e["related-override"]?m.splice(x,0,'[related_articles location="right" show_article_date="true" article_type="automatic-primary-tag"]'):e["rel-section"]&&m.splice(x,0,'[related_articles location="right" show_article_date="true" article_type="automatic-primary-section"]')}if(e.wx&&(m.splice(3,0,"[cq comment=\"ASIDE PLACED BELOW\"]\n<aside class='related alignright'> [dfm_iframe src='http://extras.denverpost.com/weather/widget-iframe.html' width='300px' height='590px'] </aside>[cq comment=\"ASIDE PLACED ABOVE\"]"),m.push('<a href="http://www.thedenverchannel.com/weather">Click here for more Denver7 weather coverage</a>.')),e.crime&&!e.wx){var k={neighborhoods:Array("Wellshire","CBD","University Hills","Overland","Speer","Gateway / Green Valley Ranch","Ruby Hill","Marston","North Capitol Hill","City Park","Indian Creek","Five Points","Sun Valley","Westwood","Cole","Washington Park West","Platt Park","Harvey Park South","Villa Park","Athmar Park","Skyland","North Park Hill","Sunnyside","Southmoor Park","Jefferson Park","Capitol Hill","Windsor","Barnum West","Virginia Village","Montbello","Bear Valley","Goldsmith","Stapleton","Chaffee Park","Cory-Merrill","Northeast Park Hill","Union Station","Washington Park","Barnum","Elyria-Swansea","Civic Center","Hampden South","Globeville","City Park West","Clayton","Cheesman Park","Country Club","Hale","Mar Lee","Lincoln Park","Berkeley","West Highland","Harvey Park","Regis","East Colfax","Whittier","Belcaro","Hampden","Fort Logan","College View / South Platte","West Colfax","Baker","Kennedy","Cherry Creek","DIA","Congress Park","South Park Hill","Rosedale","Valverde","Lowry Field","Washington Virginia Vale","Auraria","Hilltop","Highland","Montclair","University","University Park","Sloan Lake"),get_markup:function(){return"1"==this.type?'[cq comment="ASIDE PLACED BELOW"]\n<aside class="related right alignright">\n<h2 class="widget-title"><a href="http://crime.denverpost.com/">Denver Crime</a></h2>\n<p>See our <a href="http://crime.denverpost.com/neighborhood/'+this.slug+"/\">index of reported crimes in Denver's "+this.neighborhood+" neighborhood</a>.</p>\n<p><strong>Also,</strong> "+this.get_random_feature()+'.</p>\n</aside>[cq comment="ASIDE PLACED ABOVE"]':""===this.type?'[cq comment="ASIDE PLACED BELOW"]\n<aside class="related right alignright">\n<h2 class="widget-title"><a href="http://crime.denverpost.com/">Denver Crime</a></h2>\n<div style="width:100%;height: 150px;overflow:hidden"><a href="http://crime.denverpost.com/crime/'+this.slug+'/"><img src="'+this.get_random_image()+'" alt="Denver crime map" width="100%" style="width:100%;margin-top:-40px"></a></div>\n<p>See our <a href="http://crime.denverpost.com/crime/'+this.slug+'/">map, report and neighborhood rankings of '+this.crime+" in Denver</a>.</p>\n<p><strong>Also,</strong> "+this.get_random_feature()+'.</p>\n</aside>[cq comment="ASIDE PLACED ABOVE"]':void 0},image_list:["http://www.denverpost.com/wp-content/uploads/2017/01/denver-crime-map11.png","http://www.denverpost.com/wp-content/uploads/2017/01/denver-crime-map4.png","http://www.denverpost.com/wp-content/uploads/2017/01/denver-crime-map3.png","http://www.denverpost.com/wp-content/uploads/2017/01/denver-crime-map2.png","http://www.denverpost.com/wp-content/uploads/2016/10/denver-crime-map.png"],get_random_image:function(){var e=this.image_list.length,t=Math.floor(Math.random()*e);return this.image_list[t]},feature_list:[{"compare crime rates across Denver neighborhoods":"http://crime.denverpost.com/neighborhood/compare/"},{"see our Denver crime map":"http://crime.denverpost.com/map/"},{"see the Denver-city crime report":"http://crime.denverpost.com/city/"},{"see our list of neighborhood crime reports":"http://crime.denverpost.com/neighborhood/"}],get_random_feature:function(){var e=this.feature_list.length,t=Math.floor(Math.random()*e),r=this.feature_list[t],n=Object.keys(r)[0];return'<a href="'+r[n]+'">'+n+"</a>"},get_type:function(){return this.type=prompt("Enter 1 for a neighborhood crime promo or hit enter for a crime-specific promo"),this.type},get_neighborhood:function(e){e="undefined"==typeof e?"":e,this.neighborhood=prompt(e+"Type in the name of the neighborhood"),this.neighborhoods.indexOf(this.neighborhood)===-1&&(""===e?this.get_neighborhood("That's not a valid neighborhood\n"):this.get_neighborhood("This is a list of valid neighborhoods: "+this.neighborhoods.join(", "))),this.slug=this.slugify(this.neighborhood)},get_crime:function(){crime_id=prompt("Hit enter for Violent Crimes, type 1 for Assaults, 2 for Bank Robberies, 3 for Bike Thefts, 4 for Burglaries, 5 for Car Thefts, 6 for DUIs, 7 for hit and runs, 8 for Domestic Violence, 9 for Homicides, 10 for Property Crimes, 11 for Sexual Assault, 12 for Rape, 13 for Robberies, 14 for Drug & Alcohol, 15 for Larceny"),this.crime="violent crimes",this.slug="violent",crime_id.indexOf("10")>=0?(this.crime="property crimes",this.slug="property"):crime_id.indexOf("11")>=0?(this.crime="sexual assaults",this.slug="sexual-assault"):crime_id.indexOf("12")>=0?(this.crime="rapes",this.slug="sexual-assault/rape"):crime_id.indexOf("13")>=0?(this.crime="robberies",this.slug="robbery"):crime_id.indexOf("14")>=0?(this.crime="drug and alcohol crimes",this.slug="drug-alcohol"):crime_id.indexOf("15")>=0?(this.crime="larceny",this.slug="larceny"):crime_id.indexOf("16")>=0?(this.crime="",this.slug=""):crime_id.indexOf("17")>=0?(this.crime="",this.slug=""):crime_id.indexOf("18")>=0?(this.crime="",this.slug=""):crime_id.indexOf("19")>=0?(this.crime="",this.slug=""):crime_id.indexOf("20")>=0?(this.crime="",this.slug=""):crime_id.indexOf("1")>=0?(this.crime="assaults",this.slug="assault"):crime_id.indexOf("2")>=0?(this.crime="bank robberies",this.slug="robbery/robbery-bank"):crime_id.indexOf("3")>=0?(this.crime="bike thefts",this.slug="theft-bicycle"):crime_id.indexOf("4")>=0?(this.crime="burglaries",this.slug="burglary"):crime_id.indexOf("5")>=0?(this.crime="car thefts",this.slug="auto-theft"):crime_id.indexOf("6")>=0?(this.crime="DUIs",this.slug="traffic-accident-dui-duid"):crime_id.indexOf("7")>=0?(this.crime="hit-and-runs",this.slug="traffic-accident-hit-and-run"):crime_id.indexOf("8")>=0?(this.crime="domestic violence",this.slug="dv"):crime_id.indexOf("9")>=0&&(this.crime="homicides",this.slug="homicide")},init:function(){m.length>5&&(this.pos=m.length-3),"1"==this.get_type()?this.get_neighborhood():this.get_crime(),m.splice(this.pos,0,this.get_markup())},slugify:function(e){var t="àáäãâèéëêìíïîòóöôõùúüûñç·/_,:;",r="aaaaaeeeeiiiiooooouuuunc------",n=0,a=t.length;for(e=e.toLowerCase();n<a;n++)e=e.replace(new RegExp(t.charAt(n),"g"),r.charAt(n));return e.replace(/^\s+|\s+$/g,"").replace(/[^-a-zA-Z0-9\s]+/gi,"").replace(/\s/gi,"-")}};k.init()}if(e.inform){e:for(;;){var _=prompt("What is the Inform ID of the video you want to embed?\n\nNote: Embeds always appear at the top of a story, but can be moved with CTRL+X and CTRL+V\n\n","");if(8==_.length&&null!==_.match(/^[0-9]+$/))break e;alert("You must enter an 8-digit number.")}e:for(;;){var C=prompt('What is the Inform ID of the video you want to embed? (Hit ENTER for "News")\n\nHere are some of the most common playlist IDs:\n\nBusiness: 18444\nThe Cannabist: 18445\nDPTV - Up To Date: 18457\nNews: 18464 (default)\nNews - Guns: 18548\nPolitics: 18470\nPolitics - Elections: 18471\nSports: 18474\nSports - Broncos: 18477\n\n',"18464");if(5==C.length&&null!==C.match(/^[0-9]+$/))break e;alert("You must enter an 5-digit number.")}e:for(;;){var j=prompt('Should it Autoplay? (Hit ENTER for "NO")\n\nOptions:\n\nNo Autoplay: 0 (default)\nAutoplay: 1\nPlay on mouse-over: 3\nPlay when scrolled into view: 7\n',"0");if("0"===j||"1"===j||"7"===j||"3"===j)break e;alert("You must enter a 1-digit number.")}var O='[cq  comment="VIDEO PLACED BELOW"]\n<div class="ndn_embed" style="width:100%;" data-config-pb="0" data-config-widget-id="'+j+'" data-config-type="VideoPlayer/Single" data-config-tracking-group="90115" data-config-playlist-id="'+C+'" data-config-video-id="'+_+'" data-config-site-section="denverpost" data-config-width="100%" data-config-height="9/16w"></div> \n[cq  comment="VIDEO PLACED ABOVE"]';m.splice(0,0,O)}if(e.youtube){e:for(;;){var S=prompt("What is the YouTube ID or URL of the video you want to embed?\n\nNote: Embeds always appear at the top of a story, but can be moved with CTRL+X and CTRL+V\n\n","");if(_=null!==S.match(/youtube/)?S.replace("https://","").replace("http://","").replace("www.","").replace("youtube.com/","").replace("watch?v=","").replace("embed/","").replace("?autoplay=1"):S,_.length>=11&&null!==_.match(/^[A-za-z0-9_-]+$/))break e;alert(_+" is not a valid YouTube URL or ID. Try again.")}e:for(;;){var j=prompt('Should it Autoplay? (Hit ENTER for "NO")\n\nOptions:\n\nNo Autoplay: 0 or ENTER\nAutoplay: 1\n',"0");if("0"===j||"1"===j)break e;alert("You must enter 0 or 1.")}var O='[dfm_iframe src="https://www.youtube.com/embed/'+_+"?autoplay="+j+'" width="100%" advanced_fields="true" allowfullscreen="yes" scrolling="no" frameborder="0"/]';m.splice(0,0,O)}if(e.newsletter){var E={1:{which:"news",name:"Mile High Roundup"},2:{which:"sportsdaily",name:"Sports Daily newsletter"},3:{which:"bronxinsider",name:"Broncos Insider"},4:{which:"marijuana",name:"Cannabist Newsletter"},5:{which:"theknow",name:"entertainment, dining and things to do newsletter"},6:{which:"techplus",name:"Tech+ newsletter"}},A="Which newsletter do you want to plug? (Hit ENTER for the Roundup)\n\nOptions:\n\n";for(var T in E)E.hasOwnProperty(T)&&(A+="        ( "+T+" ) "+E[T].name+"\n");A+="\nEnter your selection:\n\n";e:for(;;){var P=prompt(A,"1");if("undefined"!==E[P].which)break e;alert("I'm afraid I can't do that, Dave.")}var O='<aside>\n[dfm_iframe src="http://extras.denverpost.com/app/mailer-rules/email-signup.html?which='+E[P].which+"&name="+encodeURIComponent(E[P].name)+'" width="100%" height="120px"]\n</aside>';m.push(O)}if(e.promos){var Q=[1,2,3,4,5].sort(function(){return.5-Math.random()});Q.pop(),Q.pop();var I=Q.pop();if(n.textContent.indexOf("in-article-promo")!==-1&&(Q=[],I=void 0),"undefined"!=typeof I){var L=prompt("Select the type of news to insert:\n\n\nNews:\n(1) Soft news, (2) Hard news, (18) Business, (17) Real estate, (19) Tech, (20) Featured homes, (15) General Politics, (24) Trump Admin., (23) Colo. Leg., (26) Colorado Cold Cases, (27) Top Workplaces\n\nSports:\n(Enter) Sports, (3) Broncos, (4) Nuggets, (5) Rockies\n\nFeatures:\n(6) Entertainment, (7) Restaurants, (8) Food, (9) Ask Amy, (10) Books, (11) Movies, (12) Home & Garden, (16) Travel, (25) Lifestyle\n\nMisc:\n(13) YourHub, (14) Editorials, (21) Season to Share, (22) Stock Show, (420) Marijuana\n\n\nSelection:",""),H="sports";L.indexOf("420")>=0?(H="marijuana",I="map"):L.indexOf("10")>=0?H="books":L.indexOf("11")>=0?H="movies":L.indexOf("12")>=0?H="home-garden":L.indexOf("13")>=0?H="yourhub":L.indexOf("14")>=0?H="editorials":L.indexOf("15")>=0?H="politics":L.indexOf("16")>=0?H="travel":L.indexOf("17")>=0?H="real-estate":L.indexOf("18")>=0?H="business":L.indexOf("19")>=0?H="tech":L.indexOf("20")>=0?H="featured-homes":L.indexOf("21")>=0?H="season-to-share":L.indexOf("22")>=0?H="stock-show":L.indexOf("23")>=0?H="colorado-legislature":L.indexOf("24")>=0?H="trump-administration":L.indexOf("25")>=0?H="lifestyle":L.indexOf("26")>=0?H="colorado-cold-cases":L.indexOf("27")>=0?H="top-workplaces":L.indexOf("1")>=0?H="dont-miss":L.indexOf("2")>=0?H="hard-news":L.indexOf("3")>=0?H="broncos":L.indexOf("4")>=0?H="nuggets":L.indexOf("5")>=0?H="rockies":L.indexOf("6")>=0?H="entertainment":L.indexOf("7")>=0?H="restaurants":L.indexOf("8")>=0?H="food":L.indexOf("9")>=0&&(H="ask-amy")}var D=e.crime||e.wx?9:4,R=e.crime||e.wx?20:17;m.length>12&&(m.splice(D,0,"[dfm_iframe src='https://extras.denverpost.com/app/in-article-promo/"+H+"-"+I+".html' width='100%' height='100px']"),I=Q.pop(),m.length>R&&(m.splice(Math.floor(m.length/2)+1,0,"[dfm_iframe src='https://extras.denverpost.com/app/in-article-promo/"+H+"-"+I+".html' width='100%' height='100px' scrolling='no']"),I=Q.pop())),"undefined"==typeof I||m[m.length-1].indexOf("in-article")!==-1||e.newsletter||m.splice(m.length,0,"[dfm_iframe src='https://extras.denverpost.com/app/in-article-promo/"+H+"-"+I+".html' width='100%' height='100px' scrolling='no']")}return!e.homicide||e.crime||e.wx||m.splice(3,0,"[cq comment=\"ASIDE PLACED BELOW\"]\n<aside class='related alignright'> <h2 class='widget-title'><a href='/denver-homicides/'>Homicide Report</a></h2>\n<div style=\"width:100%;height: 150px;overflow:hidden\"><a href='/denver-homicides/'><img src='http://www.denverpost.com/wp-content/uploads/2016/10/homicide-map-denver.png' alt='Denver Homicide Map' border='0'></a></div> <p>Follow this year's <a href='/denver-homicides/'>homicides in Denver</a>, and track the city's homicide rate. See also: <a href=\"http://crime.denverpost.com/map/\">Denver crime map</a>.</p> </aside>\n[cq comment=\"ASIDE PLACED ABOVE\"]"),document.getElementById("content").value=m.join("\n\n"),c}function S(){var e=document.createElement("script");e.setAttribute("src","https://extras.denverpost.com/app/bookmarklet/js/cx-src.js?v="+a()),document.body.appendChild(e)}function E(){var e=document.createElement("script");e.setAttribute("src","https://extras.denverpost.com/app/bookmarklet/js/weather-closures.js?v="+a()),document.body.appendChild(e)}function A(){jQuery("#auto-producer").keydown(function(e){if(13==e.keyCode)return jQuery("#btnOne").trigger("click"),!1}),jQuery(".tooltip-link").on("mouseenter",function(){var e=jQuery(this).data("tooltip");jQuery(".tipGraf").html(e).css("display","block")}).on("mouseleave",function(){jQuery(".tipGraf").html("").css("display","none")}),jQuery("#APoptionSelect").get(0).focus()}function T(r){var n='<div class="ap-options"><p>Welcome to The Denver Post AUTO🤖PRODUCER™ for Articles. Here\'s a list of helper functions I can perform for you:</p>';n+='<div class="one-quarter">',n+="<ul>";var a=Object.keys(r).length,i=Math.ceil(.33*a),o=Math.ceil(.66*a),s=0;for(var c in r){var d=r[c].related?' <span class="red-star">*</span>':" ",l="<p>Sets <strong>Primary Section</strong> to:<br />"+r[c]["help-primary-section"]+"</p>";l+="<p>Sets <strong>Primary Tag</strong> to:<br />"+r[c]["help-primary-tag"]+"</p>",l+="<p>Selects these <strong>Sections</strong>:<br />"+r[c]["help-sections"]+"</p>",l+="<p>Adds these <strong>Tags</strong>:<br />"+r[c]["add-tags"].join(", ")+"</p>",l+="<p>Adds <strong>Apple News</strong> sections:<br />"+r[c]["apple-news"]+"</p>",l+="<p>Adds these <strong>Features</strong>:<br />"+r[c].features.join(", ")+"</p>",r.hasOwnProperty(c)&&(n+="<li>( "+t(c)+" ) "+r[c].title+d+' <a class="tooltip-link" data-tooltip="'+e(l)+'" href="#" tabindex="0">(?)</a></li>'),s!=i&&s!=o||(n+='</ul></div><div class="one-quarter"><ul>'),s++}return n+="</ul>",n+="</div>",n+='<div class="one-quarter">',n+='<div class="tipGraf" style="display:none;"></div>',n+="</div>",n+='<div class="clear"></div>',n+='<div class="one-third">',n+='<p>Enter selection: <input type="text" id="APoptionSelect" tabindex="1"></p>',n+="</div>",n+='<div class="one-third">',n+='<p>Insert Related by Primary Tag? <span class="red-star">*</span> <input type="checkbox" id="relatedSelect" tabindex="2" /><br />',n+='Insert Inform video? <input type="checkbox" id="informSelect" tabindex="4" /><br />',n+='Change author to AP? <span class="blue-star">*</span> <input type="checkbox" id="APauthorSelect" tabindex="6" /><br />',n+='Insert Homicide Report? <span class="mag-star">*</span> <input type="checkbox" id="homicideSelect" tabindex="8" /></p>',n+="</div>",n+='<div class="one-third">',n+='<p>Insert in-article Promos? <input type="checkbox" id="promoSelect" tabindex="3" /><br />',n+='Insert YouTube video? <input type="checkbox" id="youtubeSelect" tabindex="5" /><br />',n+='Insert Newsletter widget? <input type="checkbox" id="newsletterSelect" tabindex="7" /><br />',n+='Change author to WaPo? <span class="blue-star">*</span> <input type="checkbox" id="WaPoauthorSelect" tabindex="9" /></p>',n+="</div>",n+='<div class="clear"></div>',n+='<p class="red-small">Items with a star insert Related by Primary Tag automatically.<br />Related items will only be inserted on articles with 6 or more paragraphs.</p>',n+='<p class="blue-small">AP will override WaPo if both are checked; you WILL NOT see the new author until you save.</p>',n+='<p class="mag-small">Overrides the Crime Map if inserting with the "Crime Story" option.</p>',n+='<div class="ap-help"><a href="https://extras.denverpost.com/app/bookmarklet/ap-help.html" target="_blank">AUTO🤖PRODUCER™ Help</a></div></div>'}function P(){var e=[],t=jQuery("#APoptionSelect").val();if(e.selectRelated=jQuery("#relatedSelect").prop("checked"),e.APauthorSelect=jQuery("#APauthorSelect").prop("checked"),e.WaPoauthorSelect=jQuery("#WaPoauthorSelect").prop("checked"),e.promoSelect=!!jQuery("#promoSelect").prop("checked"),e.informSelect=!!jQuery("#informSelect").prop("checked"),e.youtubeSelect=!!jQuery("#youtubeSelect").prop("checked"),e.newsletterSelect=!!jQuery("#newsletterSelect").prop("checked"),e.homicideSelect=!!jQuery("#homicideSelect").prop("checked"),R.indexOf(String(t))!==-1)jQuery("#auto-producer").html(Q),j(D[t],e),setTimeout(function(){jQuery("#auto-producer").dialog("close")},1250);else{var r=confirm("That's not a valid option. Try again, or Cancel to quit.");if(r!==!1)return!1;jQuery("#auto-producer").dialog("close")}}var Q='<div class="ap-success"><h3>I can do that!</h3><p>Here\'s a random GIF while you wait. Blame Giphy if it\'s ... bad.</p><p><img src="'+r+'" /></p><p><input name="readonly" value="'+r+'" readonly /></p></div>',I="fm-mason_post_settings-0-schema-0-primary_section-0",L="fm-mason_post_settings-0-schema-0-primary_tag-0",H={broncos:"apple-news-section-a39ee59b-d872-39ad-a323-b46261ea34ad","colorado-news":"apple-news-section-f7f303a0-da3b-3a93-8c2c-93be489a30a6",sports:"apple-news-section-3f7e6dbd-9845-39a3-ab67-14118fbd4a0e",politics:"apple-news-section-befc81a6-ec36-3426-9992-0ce17c5782f4",business:"apple-news-section-9c5c2844-09ca-3e86-8315-87224d14c790",entertainment:"apple-news-section-e401a8c2-26e7-3871-8ede-782e7e582af4",lifestyle:"apple-news-section-c81ed803-584d-3a4a-b125-09beb6cf0f8b",cannabist:"apple-news-section-aa2f2d08-860e-32b4-a1d3-765ea19a85d7",opinion:"apple-news-section-4c9d0650-2499-3637-b87f-f9355a2a3471"},D=autoProducerOptions,R=[];for(var B in D)D.hasOwnProperty(B)&&R.push(B);jQuery("#auto-producer").html(T(D)),jQuery("#auto-producer").dialog({autoOpen:!1,buttons:[{id:"btnCapture",text:"CAPTURE",click:function(){g()},tabindex:17},{id:"btnClosures",text:"+Closures",click:function(){E()},tabindex:16},{id:"btnCX",text:"+CX",click:function(){S()},tabindex:14},{id:"btnCancel",text:"CANCEL",click:function(){jQuery(this).dialog("close")},tabindex:11},{id:"btnOne",text:"AUTO🤖PRODUCE™!",click:function(){P()},tabindex:10}],title:"Denver Post AUTO🤖PRODUCER™"+m,resize:"auto",modal:!0,minWidth:940,position:{my:"center",at:"center",of:window,collision:"none"},create:function(e,t){jQuery(e.target).parent().css("position","fixed")},open:function(e,t){A()}}),jQuery("#auto-producer").dialog("open")}function l(e){function t(){jQuery("#auto-producer").keydown(function(e){if(13==e.keyCode)return jQuery("#btnOne").trigger("click"),!1}),jQuery("input[name=searchname]:checked").focus()}function r(e){var t='<div class="ap-options"><p>Welcome to The Denver Post AUTO🤖SEARCHER™ for CONTENT HUB. Here\'s what I can do for you:</p>';t+="<p>";for(var r in e)if(e.hasOwnProperty(r)){var n=e[r].default?' tabindex="1"':' tabindex="-1"';t+='<input type="radio" name="searchname" value="'+e[r]["search-term"]+'" '+n+e[r].default+"> "+e[r].title+"<br />"}return t+="</p>",t+='<div class="clear"></div>',t+='<p>Add a search term? <input type="text" id="APoptionSelect" tabindex="2"></p>',t+='<div class="ap-help"><a href="https://extras.denverpost.com/app/bookmarklet/ap-help.html" target="_blank">AUTO🤖PRODUCER™ Help</a></div></div>'}function n(){var e=jQuery("#APoptionSelect").val(),t=jQuery("input[name=searchname]:checked").val(),r=""!==e?t+" "+e:t;jQuery("#hub_search-search-input").val(r),jQuery("#auto-producer").html(i);var n=setInterval(function(){jQuery("#waiting-gif").height()>10&&(clearInterval(n),jQuery("#search-submit").trigger("click"))},500)}var a={1:{title:"Daily Camera","search-term":"daily camera",default:" checked"},2:{title:"Longmont Times-Call","search-term":"times-call",default:!1},3:{title:"Loveland Reporter-Herald","search-term":"reporter-herald",default:!1},4:{title:"The Cannabist","search-term":"cannabist",default:!1},5:{title:"The Know","search-term":"the know",default:!1},6:{title:"San Jose Mercury News","search-term":"mercury news",default:!1},7:{title:"Fort Morgan Times","search-term":"fort morgan times",default:!1}},i="<div class=\"ap-success\"><h3>Waiting for freakin' Content Hub...</h3><p>Here's a random GIF while you wait. Blame Giphy if it's ... bad.</p><p><img src=\""+e+'" id="waiting-gif" /></p><p><input name="readonly" value="'+e+'" readonly /></p></div>';jQuery("#auto-producer").html(r(a)),jQuery("#auto-producer").dialog({autoOpen:!1,buttons:[{id:"btnCancel",text:"Cancel",click:function(){jQuery(this).dialog("close")},tabindex:4},{id:"btnOne",text:"AUTO🤖SEARCH™!",click:function(){n()},tabindex:3}],title:"Denver Post AUTO🤖SEARCHER™"+m,resize:"auto",modal:!0,minWidth:900,position:{my:"center",at:"center",of:window,collision:"none"},create:function(e,t){jQuery(e.target).parent().css("position","fixed")},open:function(e,r){t()}}),jQuery("#auto-producer").dialog("open")}function u(e){function t(){jQuery("#auto-producer").keydown(function(e){if(13==e.keyCode)return jQuery("#btnOne").trigger("click"),!1}),jQuery("input[name=searchname]:checked").focus()}function n(e){var t='<div class="ap-options"><p>Welcome to The Denver Post AUTO🤖SEARCHER™ for WIRE HUB. Here\'s what I can do for you:</p>';t+='<div class="one-half"><p><strong>Select a news source:</strong></p>';for(var r in e)if(e.hasOwnProperty(r)){var n=e[r].default?' tabindex="1"':' tabindex="-1"';t+='<input type="radio" name="searchname" value="'+e[r]["search-term"]+'" '+n+e[r].default+"> "+e[r].title+"<br />"}return t+="</div>",t+='<div class="one-half"><p><strong>Select a date range:</strong></p>',t+='<input type="radio" name="searchlength" value="0" tabindex="-1" /> No date range<br />',t+='<input type="radio" name="searchlength" value="1" tabindex="2" checked /> 1 day<br />',t+='<input type="radio" name="searchlength" value="2" tabindex="-1" /> 2 days<br />',t+='<input type="radio" name="searchlength" value="7" tabindex="-1" /> 7 days<br />',t+='<input type="radio" name="searchlength" value="30" tabindex="-1" /> 30 days<br />',t+="</div>",t+='<div class="clear"></div>',t+='<p>Add a search term? <input type="text" id="APoptionSelect" tabindex="3"></p>',t+='<div class="ap-help"><a href="https://extras.denverpost.com/app/bookmarklet/ap-help.html" target="_blank">AUTO🤖PRODUCER™ Help</a></div></div>';
}function a(e){if(0!==e){var t=new Date,n=t-864e5*e,a=new Date(n);document.getElementById("dfm_hub_start_mm").value=r(a.getMonth()+1),document.getElementById("dfm_hub_start_dd").value=r(a.getDate()),document.getElementById("dfm_hub_start_yyyy").value=a.getFullYear(),document.getElementById("dfm_hub_end_mm").value=r(t.getMonth()+1),document.getElementById("dfm_hub_end_dd").value=r(t.getDate()+1),document.getElementById("dfm_hub_end_yyyy").value=t.getFullYear()}}function i(){var e=jQuery("input[name=searchlength]:checked").val(),t=jQuery("#APoptionSelect").val(),r=jQuery("input[name=searchname]:checked").val(),n=""!==t?r+t:r;a(e),jQuery("#hub_search-search-input").val(n),jQuery("#auto-producer").html(s);var i=setInterval(function(){jQuery("#waiting-gif").height()>10&&(clearInterval(i),jQuery("#search-submit").trigger("click"))},500)}var o={0:{title:"None","search-term":"",default:" checked"},1:{title:"Associated Press","search-term":"AP ",default:!1},2:{title:"Washington Post","search-term":"washington post ",default:!1},3:{title:"Bloomberg (experimental)","search-term":"bloomberg ",default:!1}},s="<div class=\"ap-success\"><h3>Waiting for freakin' Wire Hub...</h3><p>Here's a random GIF while you wait. Blame Giphy if it's ... bad.</p><p><img src=\""+e+'" id="waiting-gif" /></p><p><input name="readonly" value="'+e+'" readonly /></p>';jQuery("#auto-producer").html(n(o)),jQuery("#auto-producer").dialog({autoOpen:!1,buttons:[{id:"btnCancel",text:"Cancel",click:function(){jQuery(this).dialog("close")},tabindex:5},{id:"btnOne",text:"AUTO🤖SEARCH™!",click:function(){i()},tabindex:4}],title:"Denver Post AUTO🤖SEARCHER™"+m,resize:"auto",modal:!0,minWidth:900,position:{my:"center",at:"center",of:window,collision:"none"},create:function(e,t){jQuery(e.target).parent().css("position","fixed")},open:function(e,r){t()}}),jQuery("#auto-producer").dialog("open")}function p(e){function t(){jQuery("#auto-producer").keydown(function(e){if(13==e.keyCode)return jQuery("#btnOne").trigger("click"),!1}),jQuery("input[name=searchlength]:checked").focus()}function n(e){var t='<div class="ap-options"><p>Welcome to The Denver Post AUTO🤖SEARCHER™ for ARTICLES. Here\'s what I can do for you:</p>';return t+='<div class="one-half"><p><strong>Select a date range:</strong></p>',t+='<input type="radio" name="searchlength" value="0" tabindex="-1" /> No date range<br />',t+='<input type="radio" name="searchlength" value="1" tabindex="2" checked /> 1 day<br />',t+='<input type="radio" name="searchlength" value="2" tabindex="-1" /> 2 days<br />',t+='<input type="radio" name="searchlength" value="7" tabindex="-1" /> 7 days<br />',t+='<input type="radio" name="searchlength" value="30" tabindex="-1" /> 30 days<br />',t+="</div>",t+='<div class="clear"></div>',t+='<p>Add a search term? <input type="text" id="APoptionSelect" tabindex="3"></p>',t+='<div class="ap-help"><a href="https://extras.denverpost.com/app/bookmarklet/ap-help.html" target="_blank">AUTO🤖PRODUCER™ Help</a></div></div>'}function a(e){var t=new Date,n=t-864e5*e,a=new Date(n);jQuery('select[name="dfm_start_mm"]').val(r(a.getMonth()+1)),jQuery('select[name="dfm_start_dd"]').val(r(a.getDate())),jQuery('select[name="dfm_start_yyyy"]').val(a.getFullYear()),jQuery('select[name="dfm_end_mm"]').val(r(t.getMonth()+1)),jQuery('select[name="dfm_end_dd"]').val(r(t.getDate())+1),jQuery('select[name="dfm_end_yyyy"]').val(t.getFullYear())}function i(){var e=jQuery("input[name=searchlength]:checked").val(),t=jQuery("#APoptionSelect").val();a(e),jQuery("#post-search-input").val(t),jQuery("#auto-producer").html(s);var r=setInterval(function(){jQuery("#waiting-gif").height()>10&&(clearInterval(r),jQuery("#post-query-submit").trigger("click"))},500)}var o={1:{title:"Associated Press","search-term":"associated press",default:" checked"}},s="<div class=\"ap-success\"><h3>Waiting for the freakin' Article Search...</strong></h3><p>Here's a random GIF while you wait. Blame Giphy if it's ... bad.</p><p ><img src=\""+e+'" id="waiting-gif" /></p><p><input name="readonly" value="'+e+'" readonly /></p>';jQuery("#auto-producer").html(n(o)),jQuery("#auto-producer").dialog({autoOpen:!1,buttons:[{id:"btnCancel",text:"Cancel",click:function(){jQuery(this).dialog("close")},tabindex:5},{id:"btnOne",text:"AUTO🤖SEARCH™!",click:function(){i()},tabindex:4}],title:"Denver Post AUTO🤖SEARCHER™"+m,resize:"auto",modal:!0,minWidth:900,position:{my:"center",at:"center",of:window,collision:"none"},create:function(e,t){jQuery(e.target).parent().css("position","fixed")},open:function(e,r){t()}}),jQuery("#auto-producer").dialog("open")}function h(e){g.indexOf("edit.php")>-1?p(e):g.indexOf("content_hub_view")>-1?l(e):g.indexOf("wire_hub_view")>-1?u(e):d(e)}var m=" v1.0.5",g=window.location.href;if(document.body.classList.contains("modal-open")||g.indexOf("upload.php")>-1){var f=document.createElement("script");f.setAttribute("src","https://extras.denverpost.com/app/bookmarklet/js/photo-cleanup.min.js?v="+a()),document.body.appendChild(f)}else{if(!document.body.contains(document.getElementById("auto-producer"))){var y=window.document.createElement("link");y.setAttribute("rel","stylesheet"),y.setAttribute("href","https://extras.denverpost.com/app/bookmarklet/auto-producer.min.css?v="+a()),window.document.body.appendChild(y);var v=window.document.createElement("script");v.setAttribute("src","https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"),window.document.body.appendChild(v);var b=window.document.createElement("script");b.setAttribute("src","https://extras.denverpost.com/app/bookmarklet/autoproducer/ap-taglist.js?v="+a()),window.document.body.appendChild(b);var w=window.document.createElement("script");w.setAttribute("src","https://extras.denverpost.com/app/bookmarklet/js/ap-options.min.js?v="+a()),window.document.body.appendChild(w);var x=window.document.createElement("div");x.setAttribute("id","auto-producer"),window.document.body.appendChild(x)}var k=setInterval(function(){"undefined"==typeof autoProducerTagList&&clearInterval(k)},20),_=setInterval(function(){"undefined"==typeof autoProducerOptions&&clearInterval(_)},20),C=setInterval(function(){if("undefined"!=typeof jQuery.ui.dialog){clearInterval(C);var e="";jQuery.ajax({url:"https://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC",type:"GET",success:function(t){e=t.data.image_url,e=e.replace("http:","https:")}});var t=setInterval(function(){"undefined"!=typeof e&&e.indexOf("giphy.gif")>-1&&(clearInterval(t),h(e))},10)}},50)}}();